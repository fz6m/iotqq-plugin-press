(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{389:function(t,s,a){"use strict";a.r(s);var n=a(25),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_5000-choyen-字体生成器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5000-choyen-字体生成器"}},[t._v("#")]),t._v(" 5000 choyen 字体生成器")]),t._v(" "),a("p",[a("em",[t._v("Version: beta")])]),t._v(" "),a("h2",{attrs:{id:"使用前注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用前注意"}},[t._v("#")]),t._v(" 使用前注意")]),t._v(" "),a("h3",{attrs:{id:"_5000-choyen-字体是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5000-choyen-字体是什么"}},[t._v("#")]),t._v(" 5000 choyen 字体是什么")]),t._v(" "),a("p",[t._v("详见 "),a("a",{attrs:{href:"https://github.com/fz6m/5000choyen-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("5000choyen-server"),a("OutboundLink")],1),t._v(" ，是一种特殊风格的字体。")]),t._v(" "),a("p",[t._v("利用这个 nodejs 服务端，可以在本地请求生成该字体的图片，再通过 python 转发。")]),t._v(" "),a("h3",{attrs:{id:"我有更便捷的选择吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我有更便捷的选择吗"}},[t._v("#")]),t._v(" 我有更便捷的选择吗")]),t._v(" "),a("h4",{attrs:{id:"为什么要使用-nodejs-作为服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么要使用-nodejs-作为服务端"}},[t._v("#")]),t._v(" 为什么要使用 nodejs 作为服务端")]),t._v(" "),a("p",[t._v("因为核心绘图部分是使用网页中的 canvas 进行层叠渐变渲染堆出来的，所以需要使用 JavaScript 作为编程语言生成这种字体的图片。")]),t._v(" "),a("h4",{attrs:{id:"使用-python-原生不可以实现吗"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-python-原生不可以实现吗"}},[t._v("#")]),t._v(" 使用 python 原生不可以实现吗")]),t._v(" "),a("p",[t._v("可以。但是无法完全复现一样具有冲击的效果，所以此路否决。")]),t._v(" "),a("h4",{attrs:{id:"使用此功能我需要承担什么成本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用此功能我需要承担什么成本"}},[t._v("#")]),t._v(" 使用此功能我需要承担什么成本")]),t._v(" "),a("p",[t._v("需要在本地安装好 nodejs 环境，并部署好该项目。")]),t._v(" "),a("p",[t._v("每次调用时，python 会去本地请求该服务端的地址，并将生成的图片获取到本地保存，再发往机器人主端外送消息。")]),t._v(" "),a("p",[t._v("由 v8 引擎驱动的 nodejs 是很快的（ 比 python 要快 ），所以从请求获取图片再到发送，整个过程是非常快的。")]),t._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("h3",{attrs:{id:"服务端部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务端部署"}},[t._v("#")]),t._v(" 服务端部署")]),t._v(" "),a("h4",{attrs:{id:"nodejs-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nodejs-环境"}},[t._v("#")]),t._v(" nodejs 环境")]),t._v(" "),a("p",[t._v("我们默认你的服务端具有了 nodejs 环境，你可以通过搜索引擎查找如何安装。")]),t._v(" "),a("p",[t._v("一个便捷的方法：如果你使用了宝塔服务面板，可以在 软件商店 > 安装 PM2 管理器，之后会附带安装好 nodejs 环境。")]),t._v(" "),a("h4",{attrs:{id:"拉取项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拉取项目"}},[t._v("#")]),t._v(" 拉取项目")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("git clone")]),t._v(" 或者从 "),a("a",{attrs:{href:"https://github.com/fz6m/5000choyen-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目处"),a("OutboundLink")],1),t._v(" 下载压缩包的方式，将服务端下载到本地。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/fz6m/5000choyen-server.git\n")])])]),a("h4",{attrs:{id:"安装依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),a("p",[t._v("之后进入该项目根目录，执行依赖安装：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设定 npm 下载源为 taobao 源，否则下载会很卡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry https://registry.npm.taobao.org\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 安装 yarn ")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设定 yarn 下载源为 taobao 源，否则下载会很卡")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry https://registry.npm.taobao.org\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 yarn 安装依赖")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n")])])]),a("p",[t._v("注：假如最后一步使用 "),a("code",[t._v("yarn")]),t._v(" 命令安装依赖卡住很久不动，或者失败，请使用如下命令安装依赖")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用 yarn 安装出问题时，改为编译安装依赖")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("npm_config_build_from_source")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("true "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])])]),a("p",[t._v("假如你还有问题，一般是在比较旧的服务器上安装 "),a("code",[t._v("canvas")]),t._v(" 这个依赖时发生了问题，你可以选择：")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("我对 nodejs 有一定了解，可以自行通过搜索解决安装 "),a("code",[t._v("canvas")]),t._v(" 失败的问题")])]),t._v(" "),a("li",[a("p",[t._v("我对 nodejs 没有了解，也不想解决，请放弃使用此插件")])])]),t._v(" "),a("h4",{attrs:{id:"启动项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动项目"}},[t._v("#")]),t._v(" 启动项目")]),t._v(" "),a("h5",{attrs:{id:"使用-tmux-启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-tmux-启动"}},[t._v("#")]),t._v(" 使用 tmux 启动")]),t._v(" "),a("p",[t._v("tmux 是一个多窗口隔离管理工具，如果你并不熟悉，可以先学习教程："),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/10/tmux.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阮一峰 Tmux 使用教程"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("为了保证该服务端在后台运行，新建一个 tmux ，并跳转到已经安装好依赖的该项目根目录下，执行：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动项目")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" server\n")])])]),a("p",[t._v("之后 "),a("code",[t._v("ctrl + b + d")]),t._v(" 分离 tmux 会话，大功告成。")]),t._v(" "),a("h5",{attrs:{id:"使用-pm2-启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-pm2-启动"}},[t._v("#")]),t._v(" 使用 pm2 启动")]),t._v(" "),a("p",[t._v("如果你追求更好的服务稳定性，可以采用 pm2 启动。")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("先在项目根目录新建一个 "),a("code",[t._v("run.sh")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" server\n")])])])]),t._v(" "),a("li",[a("p",[t._v("赋予该脚本运行权限，之后使用 pm2 启动该脚本即可")])])]),t._v(" "),a("h3",{attrs:{id:"python-插件部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#python-插件部署"}},[t._v("#")]),t._v(" python 插件部署")]),t._v(" "),a("h4",{attrs:{id:"新建插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新建插件"}},[t._v("#")]),t._v(" 新建插件")]),t._v(" "),a("p",[t._v("服务端部署好后，在机器人插件目录的 "),a("code",[t._v("plugins")]),t._v(" 文件夹下新建该 "),a("code",[t._v("bot_5000_choyen.py")]),t._v(" 插件：")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -*- coding:utf-8 -*-")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" base64\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" enum "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Enum\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" io "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" BytesIO\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" httpx\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" botoy "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" GroupMsg\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" botoy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("decorators "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ignore_botself\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" botoy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collection "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" MsgTypes\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" PIL "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Image\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ==========================================")]),t._v("\nRESOURCES_BASE_PATH "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./resources/5000-choyen"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ==========================================")]),t._v("\n\nbot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意更换您的 bot.py 文件为最新")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getenv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"BOTQQ"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@ignore_botself")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("receive_group_msg")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GroupMsg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    userGroup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FromGroupId\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" Tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("textOnly"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("MsgType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\n    userQQ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FromUserId\n    msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Content\n\n    mainProgram"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userQQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Status")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Enum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    SUCCESS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_success"')]),t._v("\n\n    FAILURE "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_failure"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Tools")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("textOnly")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msgType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" msgType "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" MsgTypes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TextMsg\n\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readPictureFile")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FAILURE\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" f"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("base64conversion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        picByte "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("readPictureFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" picByte "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" Status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FAILURE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" Exception"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"图片文件不存在！"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("base64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b64encode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picByte"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" encoding"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"utf-8"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendPictures")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Action"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" standardization"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" atUser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" standardization"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[PICFLAG]"')]),t._v("\n        bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sendGroupPic"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            userGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            content"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            picBase64Buf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base64conversion"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("picPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            atUser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("atUser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@staticmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("checkFolder")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exists"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("makedirs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n\n    DEFAULT_HEADERS "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"User-Agent"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token decorator annotation punctuation"}},[t._v("@classmethod")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            headers "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DEFAULT_HEADERS\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" httpx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("timeout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FAILURE\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPictures")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    img "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Network"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getBytes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" img\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mainProgram")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userQQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" userGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        msg_list "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("split"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("' '")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        first_msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发的第一个关键词")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" first_msg "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n            length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("len")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# >= 2")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set top")]),t._v("\n            top_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set bottom")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                bottom_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                bottom_text "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# set offset")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                offset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" msg_list"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                offset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),t._v("\n\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# download")]),t._v("\n            url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'http://127.0.0.1:4000/api/v1/gen?top=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("top_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" bottom_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'&bottom=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("bottom_text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'&offset=")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("offset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'")])]),t._v("\n            url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&format=png'")]),t._v("\n\n            img "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" getPictures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n            resource_folder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" RESOURCES_BASE_PATH\n            Tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checkFolder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resource_folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n            cache_folder "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("RESOURCES_BASE_PATH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/cache'")])]),t._v("\n            Tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("checkFolder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cache_folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n            save_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string-interpolation"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("f'")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("cache_folder"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("userQQ"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(".png'")])]),t._v("\n            Image"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("BytesIO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("img"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("save"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("save_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n            Tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sendPictures"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n                userGroup"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("userGroup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" picPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("save_path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bot"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bot\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n")])])]),a("p",[t._v("这段代码并没有提供在 "),a("code",[t._v("opqqq-plugin")]),t._v(" 仓库中，需要你自己新建。")]),t._v(" "),a("h4",{attrs:{id:"安装依赖-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖-2"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" httpx\n    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pillow\n")])])]),a("p",[t._v("注：如果您下载依赖太慢，可选用大清源加速，例：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("    pip "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -i https://pypi.tuna.tsinghua.edu.cn/simple pillow\n")])])]),a("h4",{attrs:{id:"使用插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用插件"}},[t._v("#")]),t._v(" 使用插件")]),t._v(" "),a("p",[t._v("一切准备就绪，可以启动机器人通过如下命令使用：")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只有单行红字")]),t._v("\n    5000 单行文字\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 上下两行文字")]),t._v("\n    5000 上部文字 下部文字\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 第二行下部文字向右额外偏移 100 像素")]),t._v("\n    5000 上部文字 下部文字 100\n")])])]),a("h2",{attrs:{id:"自定义配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义配置项"}},[t._v("#")]),t._v(" 自定义配置项")]),t._v(" "),a("h3",{attrs:{id:"如何配置触发命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何配置触发命令"}},[t._v("#")]),t._v(" 如何配置触发命令")]),t._v(" "),a("p",[t._v("请阅读上面的 python 插件脚本，稍微改一下判断条件的内容即可。")]),t._v(" "),a("h3",{attrs:{id:"如何修改图片格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何修改图片格式"}},[t._v("#")]),t._v(" 如何修改图片格式")]),t._v(" "),a("p",[t._v("默认发送 "),a("code",[t._v("png")]),t._v(" 格式的图片，如果服务器带宽不够可以换为 "),a("code",[t._v("jpg")]),t._v(" 格式，将请求 url 中的 "),a("code",[t._v("format")]),t._v(" 参数换为 "),a("code",[t._v("format=jpg")]),t._v(" 即可。")]),t._v(" "),a("p",[t._v("全部 url 请求参数可参见服务端说明："),a("a",{attrs:{href:"https://github.com/fz6m/5000choyen-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("5000choyen-server"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("h3",{attrs:{id:"注意风控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意风控"}},[t._v("#")]),t._v(" 注意风控")]),t._v(" "),a("p",[t._v("假如内鬼经常制造一些带敏感内容的图片，风控风险会比较大。")]),t._v(" "),a("p",[t._v("一旦出现消息送不出去的情况，请立即停用机器人一段时间，并永远不再使用该插件！")]),t._v(" "),a("h3",{attrs:{id:"安装过程问题太多搞不明白了"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装过程问题太多搞不明白了"}},[t._v("#")]),t._v(" 安装过程问题太多搞不明白了")]),t._v(" "),a("p",[t._v("此插件使用成本较高，不适合小小白使用。")])])}),[],!1,null,null,null);s.default=r.exports}}]);