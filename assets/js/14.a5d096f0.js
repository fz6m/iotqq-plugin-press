(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{391:function(t,a,s){"use strict";s.r(a);var e=s(25),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"strings-签到"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#strings-签到"}},[t._v("#")]),t._v(" Strings 签到")]),t._v(" "),s("p",[s("em",[t._v("Version: 1.2")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[t._v("使用时，请保证所有配置文件在 UTF-8 编码下保存。"),s("br"),t._v("\n若为 ANSI ，可使用 NotePad++ 编码 -> 转为 UTF-8")])]),t._v(" "),s("h2",{attrs:{id:"部署流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署流程"}},[t._v("#")]),t._v(" 部署流程")]),t._v(" "),s("h3",{attrs:{id:"安装-sdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-sdk"}},[t._v("#")]),t._v(" 安装 SDK")]),t._v(" "),s("p",[t._v("确保你已经安装了基础 "),s("RouterLink",{attrs:{to:"/guide/guide.html"}},[t._v("SDK")]),t._v(" 。")],1),t._v(" "),s("h3",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),s("p",[t._v("直接在 "),s("a",{attrs:{href:"https://github.com/opq-osc/opqqq-plugin/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("releases"),s("OutboundLink")],1),t._v(" 中下载该插件，亦或 clone 等方式打包下载本项目。")]),t._v(" "),s("p",[t._v("注：如果你通过 releases 下载，下载得到的是独立的插件，如果你想使用多个插件，为减少将文件混合在一起的成本，建议打包下载整个项目。")]),t._v(" "),s("h3",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[t._v("#")]),t._v(" 安装依赖")]),t._v(" "),s("p",[t._v("安装本插件依赖：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" httpx\n    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" pillow\n    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" python-dateutil\n")])])]),s("p",[t._v("注：如果您下载依赖太慢，可选用大清源加速，例：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -i https://pypi.tuna.tsinghua.edu.cn/simple pillow\n")])])]),s("h3",{attrs:{id:"添加账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加账号"}},[t._v("#")]),t._v(" 添加账号")]),t._v(" "),s("p",[t._v("在根目录 "),s("code",[t._v("botoy.json")]),t._v(" 配置文件夹内，你需要做如下配置：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"qq"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. 修改为你的机器人账号")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"host"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"port"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8888")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. 修改为你机器人启动的端口，默认没有修改过的话，就是 8888")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"group_blacklist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"friend_blacklist"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"blocked_users"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webhook"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webhook_post_url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:5000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"webhook_timeout"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"开始使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始使用"}},[t._v("#")]),t._v(" 开始使用")]),t._v(" "),s("p",[t._v("你可以在群内发送如下指令触发该插件：")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    签到\n")])])]),s("h2",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),s("h3",{attrs:{id:"触发命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#触发命令"}},[t._v("#")]),t._v(" 触发命令")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 9 行找到如下触发指令列表：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发命令列表")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 例：['签到', '早']")]),t._v("\n    commandList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'签到'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("h3",{attrs:{id:"一言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一言"}},[t._v("#")]),t._v(" 一言")]),t._v(" "),s("p",[t._v("本插件一言功能感谢 "),s("code",[t._v("https://v1.hitokoto.cn/")]),t._v(" 提供的 api 接口。")]),t._v(" "),s("h4",{attrs:{id:"一言存档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一言存档"}},[t._v("#")]),t._v(" 一言存档")]),t._v(" "),s("p",[t._v("为防止网络问题或一言网站倒闭，历史获取到的一言均会存档于 "),s("code",[t._v("resources/sign-in/hitokoto/cache/archive.json")]),t._v(" 以备出现问题时自动调档。")]),t._v(" "),s("h4",{attrs:{id:"一言开关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一言开关"}},[t._v("#")]),t._v(" 一言开关")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 15 行找到一言开关：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 是否打开一言，若不打开，默认显示 noHitokoto")]),t._v("\n    hitokotoOpen "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n")])])]),s("p",[t._v("当网络存在问题或一言网站倒闭时，你可以关闭一言。")]),t._v(" "),s("h4",{attrs:{id:"一言屏蔽"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一言屏蔽"}},[t._v("#")]),t._v(" 一言屏蔽")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 19 行找到一言屏蔽列表：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一言黑名单，含有该内容即重新获取")]),t._v("\n    hitokotoBlacklist "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'历史的发展'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'没有调查'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("当一言出现黑名单内容时，将重新获取 "),s("code",[t._v("1")]),t._v(" 次，重新获取后仍为黑名单内容的话，将采用默认一言。")]),t._v(" "),s("p",[t._v("你可以借此屏蔽掉政治色彩强烈的一言，给予群友更好的体验。")]),t._v(" "),s("h4",{attrs:{id:"默认一言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#默认一言"}},[t._v("#")]),t._v(" 默认一言")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 17 行找到默认一言：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    noHitokoto "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'今天也要元气满满哦~'")]),t._v("\n")])])]),s("p",[t._v("以下几种情况将采用默认一言：")]),t._v(" "),s("ul",[s("li",[t._v("当一言功能关闭时")]),t._v(" "),s("li",[t._v("当两次获取一言都在黑名单时")]),t._v(" "),s("li",[t._v("当网络超时或一言网站倒闭，同时调取本地存档失败时")])]),t._v(" "),s("h3",{attrs:{id:"出图设定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出图设定"}},[t._v("#")]),t._v(" 出图设定")]),t._v(" "),s("h4",{attrs:{id:"出图质量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出图质量"}},[t._v("#")]),t._v(" 出图质量")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 13 行找到出图质量设定：")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("    highQuality "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),t._v("\n")])])]),s("ul",[s("li",[s("code",[t._v("True")]),t._v(" ："),s("code",[t._v("png")]),t._v(" 格式出图，单张在 400 KB 左右，色彩鲜艳。")]),t._v(" "),s("li",[s("code",[t._v("False")]),t._v(" ："),s("code",[t._v("jpg")]),t._v(" 格式出图，单张在 100 KB 以内，少许模糊，并丢失 A 通道透明度 "),s("code",[t._v("190")]),t._v(" 的效果。")])]),t._v(" "),s("h4",{attrs:{id:"出图参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#出图参数"}},[t._v("#")]),t._v(" 出图参数")]),t._v(" "),s("p",[t._v("你可以在 "),s("code",[t._v("plugins/bot_sign_in.py")]),t._v(" 的第 275-299 行找到出图参数设定，一般情况下，你不需要改动他们。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("参数")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("默认值")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("magicCirclePlus")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("30")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("魔法圆尺寸 - 头像尺寸")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("avatarVerticalOffset")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("50")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("头像在 "),s("code",[t._v("y/2")]),t._v(" 位置向上额外偏移的值")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("textBaseMapSize")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("(540, 160)")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字区域 "),s("code",[t._v("(0, 0, 0, 190)")]),t._v(" 颜色的尺寸大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("topPositionOfTextBaseMap")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("425")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字区域上边 "),s("code",[t._v("y")]),t._v(" 坐标位置")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("textBaseMapLeftPosition")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字最左边的限制，文字不能在此坐标左侧")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("fontAttenuation")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("2")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字字号衰减的大小")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("minimumFontLimit")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("10")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字的最小字号，若文字太长使得衰减小于此字号，不会出图")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("infoCoordinatesY")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字区域每行文字的 "),s("code",[t._v("y")]),t._v(" 中心坐标")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("infoFontSize")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("28, 28, 25, 25")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字区域每行文字的初始字号")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("infoFontName")])]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[s("code",[t._v("-")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文字区域文字的字体")])])])]),t._v(" "),s("p",[t._v("注： "),s("code",[t._v("-")]),t._v(" 表示与其他值动态相关或纯文本。")]),t._v(" "),s("h2",{attrs:{id:"其他"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),s("p",[t._v("您可以安装 "),s("code",[t._v("ujson")]),t._v(" 依赖以加速 json 读取的速度：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" ujson\n")])])]),s("p",[t._v("注：如果安装 "),s("code",[t._v("ujson")]),t._v(" 依赖失败，你可以放弃安装，从而会自动使用已有 "),s("code",[t._v("json")]),t._v(" 库代替 "),s("code",[t._v("ujson")]),t._v(" （性能较低），你也可以在 "),s("a",{attrs:{href:"https://www.lfd.uci.edu/~gohlke/pythonlibs/#ujson",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v(" 下载对应你 "),s("code",[t._v("python")]),t._v(" 版本和位数的 "),s("code",[t._v("ujson")]),t._v(" 安装包，之后执行本地安装即可：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("    pip "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" 本地 ujson 安装包"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".whl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("路径\n")])])]),s("h2",{attrs:{id:"插件原作者"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插件原作者"}},[t._v("#")]),t._v(" 插件原作者")]),t._v(" "),s("p",[t._v("感谢该插件原作者："),s("a",{attrs:{href:"https://github.com/jinserrr",target:"_blank",rel:"noopener noreferrer"}},[t._v("jinserrr"),s("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);